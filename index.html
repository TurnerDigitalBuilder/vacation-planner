<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vacation Planner</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="vacation-planner.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Vacation Planner</h1>
            <p>Plan your perfect trip with an interactive map and itinerary</p>
        </header>

        <div class="main-content">
            <!-- Left Panel - Itinerary -->
            <div class="sidebar">
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button onclick="openAddModal()" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add New Destination
                    </button>
                    <button onclick="exportToJSON()" class="btn btn-success">
                        <i class="fas fa-download"></i> Export JSON
                    </button>
                    <button onclick="document.getElementById('fileInput').click()" class="btn btn-purple">
                        <i class="fas fa-upload"></i> Import JSON
                    </button>
                    <input type="file" id="fileInput" accept=".json" onchange="importFromJSON(event)" style="display: none;">
                    <button id="showAllBtn" class="btn btn-secondary" style="display: none;">
                        <i class="fas fa-eye"></i> Show All Days on Map
                    </button>
                </div>

                <!-- Total Cost Display -->
                <div class="total-cost-container">
                    <h4>Total Estimated Cost</h4>
                    <p id="totalCostDisplay">$0</p>
                </div>

                <!-- Settings -->
                <div class="settings-controls">
                    <div class="toggle-switch">
                        <label for="autoZoomToggle">Auto-Zoom Map</label>
                        <input type="checkbox" id="autoZoomToggle" class="toggle-input" checked>
                        <label for="autoZoomToggle" class="toggle-label"></label>
                    </div>
                </div>

                <!-- Destinations List -->
                <h3>Itinerary</h3>
                <div id="destinationsList" class="destinations-list">
                    <div class="empty-state">
                        <i class="fas fa-map-marked-alt"></i>
                        <p>No destinations yet. Import a JSON file or add your first destination!</p>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Map -->
            <div class="map-container">
                <div id="map"></div>
                <div class="map-legend">
                    <h4>Map Legend</h4>
                    <p>üé® Pin colors represent different days</p>
                    <p>üìù Click markers for details</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Add/Edit Destination -->
    <div id="destinationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Destination</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="modalDestName">Destination Name</label>
                    <input type="text" id="modalDestName" placeholder="e.g., Reykjavik, Iceland">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="modalArrivalDate">Arrival Date</label>
                        <input type="date" id="modalArrivalDate">
                    </div>
                    <div class="form-group">
                        <label for="modalDepartureDate">Departure Date</label>
                        <input type="date" id="modalDepartureDate">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="modalCategory">Category</label>
                        <select id="modalCategory">
                            <option value="accommodation">üè® Accommodation</option>
                            <option value="activity">üéØ Activity/Attraction</option>
                            <option value="food">üçΩÔ∏è Food/Restaurant</option>
                            <option value="transportation">‚úàÔ∏è Transportation</option>
                            <option value="shopping">üõçÔ∏è Shopping</option>
                            <option value="entertainment">üé≠ Entertainment</option>
                            <option value="other">üìå Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modalCost">Estimated Cost ($)</label>
                        <input type="number" id="modalCost" step="1" placeholder="e.g., 50">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="modalActivities">Description/Notes</label>
                    <textarea id="modalActivities" rows="5" placeholder="Add details, notes, or specific plans"></textarea>
                </div>

                <div class="form-group">
                    <label for="modalCoordinates">Coordinates</label>
                    <input type="text" id="modalCoordinates" placeholder="Paste from Google Maps, e.g., 64.1466, -21.9426">
                </div>

                <div class="form-group">
                    <label for="modalWebsiteUrl">Website URL</label>
                    <input type="url" id="modalWebsiteUrl" placeholder="https://example.com">
                </div>

                <div class="form-group">
                    <label for="modalGoogleMapsUrl">Google Maps URL</label>
                    <input type="url" id="modalGoogleMapsUrl" placeholder="https://maps.app.goo.gl/...">
                </div>
                
            </div>
            <div class="modal-footer">
                <button onclick="closeModal()" class="btn btn-secondary">Cancel</button>
                <button onclick="saveDestination()" class="btn btn-primary">Save Destination</button>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
    
    <!-- Custom JS -->
    <script src="vacation-planner.js"></script>
</body>
</html>
